<div class="page-header">
  <%= link_to new_network_action_path, class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    New Action
  <% end %>
  <h1>Listing actions</h1>
</div>

<div style="padding: 0 1.5rem;">
<%= form_tag network_actions_path, :method => :get, class: "form-horizontal" do %>
  <div class="form-group">
    <div class="input-group">
        <span class="input-group-btn">
          <button class="btn btn-default" type="submit" name="commit">Go!</button>
        </span>
        <%= select_tag :actor_ids, 
            options_from_collection_for_select(
              User.order(:email).all, 
              :id, 
              :email,
              params[:actor_ids]
            ),
            class: "select2 form-control", 
            multiple: true, 
            data: { placeholder: 'Owner' } 
      %>
    </div>
  </div>
</div>

<% end %>

<div class="table-responsive">
  
  
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Owner</th>
        <th>Event</th>
        <th>Type</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Description</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @network_actions) do |network_action| %>
        <td><%= link_to network_action.actor.try(:name), network_action.actor %></td>
        <td>
          <% if network_action.owner.try(:email) %>
            <%= link_to network_action.owner.email, network_action.owner %>
          <% else %>
            No Owner Yet
          <% end %>
        </td>
        <td>
          <% if network_action.network_event.try(:name) %>
            <%= link_to network_action.network_event.try(:name), 
                    network_action.network_event 
            %>
          <% else %>
            No Event Yet
          <% end %>
        </td>
        <td><%= network_action.action_type if network_action.action_type.present? %></td>
        <td><%= network_action.try(:status).titleize %></td>
        <td><%= network_action.try(:priority).titleize %></td>
        <td><%= network_action.description %></td>
        <td><%= link_to 'Show', network_action %></td>
        <td><%= link_to 'Edit', edit_network_action_path(network_action) %></td>
        <td><%= link_to 'Destroy', network_action, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tbody>
  </table>
</div>
